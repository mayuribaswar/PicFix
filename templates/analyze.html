<!DOCTYPE html>
<html>
<head>
<title>Image Analysis - Face Detection</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body { background:#f4f6f9; }
img { max-width:100%; border-radius:12px; border:1px solid #ccc; }
.card { border-radius:15px; }
</style>
</head>

<body>

<nav class="navbar navbar-dark bg-dark px-4">
  <a class="navbar-brand" href="/">Image Processing Studio</a>
  <div>
    <a href="/" class="btn btn-outline-light">Editor</a>
    <a href="/about" class="btn btn-outline-light">About</a>
  </div>
</nav>

<div class="container mt-4">

<div class="card p-4 shadow-sm">
<h5>Face Detection</h5>
<p class="text-muted">
Upload an image to analyze and detect human faces using OpenCV.
</p>

<input type="file" id="faceUpload" class="form-control mb-3">

<button class="btn btn-primary" onclick="detect()">Detect Faces</button>
</div>

<div class="row mt-4">
<div class="col-md-6">
<h6>Result</h6>
<img id="result">
<p class="mt-2 fw-bold" id="count"></p>

</div>
</div>

</div>

<script>
function detect(){
  let data = new FormData()
  data.append("image", faceUpload.files[0])

  fetch("/detect_faces", {
    method:"POST",
    body:data
  })
  .then(res => res.json())
  .then(d => {
    result.src = `/static/output/${d.image}?${Date.now()}`
    count.innerHTML =
      "Faces detected: " + d.faces + "<br>" +
      "Eyes detected: " + d.eyes
  })
}
</script>


</body>
</html>
